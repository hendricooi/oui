<?php 

$jsondata = '{
    "EqpId": "AOI-03",
    "Function": "UnloadLotApprovement",
    "List1": [
      "Wip Data"
    ],
    "List2": [
      [
        "LotInfo",
        [
          [
            "Device",
            "5810"
          ],
          [
            "Lead Count",
            "443"
          ],
          [
            "Lot ID",
            "LOTA"
          ],
          [
            "Lot Qty",
            50
          ],
          [
            "Operation",
            "8540"
          ],
          [
            "Package",
            "BL1"
          ],
          [
            "Track In Qty",
            100
          ],
          [
            "Track Out Qty",
            100
          ]
        ]
      ],
      [
        "RejectInfo",
        [
          [
            [
              "Code",
              "R44105"
            ],
            [
              "Description",
              "FAB REJECTS"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "R44113"
            ],
            [
              "Description",
              "JAGGED LILNE"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "R44203"
            ],
            [
              "Description",
              "DIE CHIP/CRACK(WITH PACKAGE)"
            ],
            [
              "RejectQty",
              "4"
            ]
          ],
          [
            [
              "Code",
              "44205"
            ],
            [
              "Description",
              "LIFTED DIE"
            ],
            [
              "RejectQty",
              "3"
            ]
          ],
          [
            [
              "Code",
              "44209"
            ],
            [
              "Description",
              "PACKAGE REJECTS"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44217"
            ],
            [
              "Description",
              "FLUX STAIN"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44225"
            ],
            [
              "Description",
              "DIE CRACK  FOR MCM"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44251"
            ],
            [
              "Description",
              "OPEN < 3 PINS"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44252"
            ],
            [
              "Description",
              "OPEN > 3 PINS"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44253"
            ],
            [
              "Description",
              "DCM OPEN FAILURE"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44261"
            ],
            [
              "Description",
              "LLA SHORT"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44262"
            ],
            [
              "Description",
              "PS SHORT"
            ],
            [
              "RejectQty",
              "1"
            ]
          ],
          [
            [
              "Code",
              "44263"
            ],
            [
              "Description",
              "I/O SHORT"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44400"
            ],
            [
              "Description",
              "OTHERS(UNDERFILL)"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44401"
            ],
            [
              "Description",
              "UNDERFILL NON FLOW"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44402"
            ],
            [
              "Description",
              "UNDERFILL ON PIN/IO PAD"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44403"
            ],
            [
              "Description",
              "UNDERFILL ON TOP OF DIE"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44404"
            ],
            [
              "Description",
              "UNDERFILL LOW FILLET"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44405"
            ],
            [
              "Description",
              "UNDERFILL CSAM REJECT"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44406"
            ],
            [
              "Description",
              "UNDERFILL SPILLAGE ON PACKAGE"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44407"
            ],
            [
              "Description",
              "DIE CRASH BY MACHINE"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44412"
            ],
            [
              "Description",
              "PACKAGE DISCOLOURATION AFTER PLASMA"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44602"
            ],
            [
              "Description",
              "CONTAMINATION/FOREIGN MATERIAL ON PIN/IO PAD"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44603"
            ],
            [
              "Description",
              "DAMAGED LEAD/PIN"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "44900"
            ],
            [
              "Description",
              "DROPPED UNIT"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44203"
            ],
            [
              "Description",
              "DIE CHIP/CRACK(WITH PACKAGE)"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44205"
            ],
            [
              "Description",
              "LIFTED DIE"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44209"
            ],
            [
              "Description",
              "PACKAGE REJECTS"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44217"
            ],
            [
              "Description",
              "FLUX STAIN"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44251"
            ],
            [
              "Description",
              "OPEN < 3 PINS"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44252"
            ],
            [
              "Description",
              "OPEN > 3 PINS"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44261"
            ],
            [
              "Description",
              "LLA SHORT"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44262"
            ],
            [
              "Description",
              "PS SHORT"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44263"
            ],
            [
              "Description",
              "I/O SHORT"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44400"
            ],
            [
              "Description",
              "OTHERS(UNDERFILL)"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44401"
            ],
            [
              "Description",
              "UNDERFILL NON FLOW"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44402"
            ],
            [
              "Description",
              "UNDERFILL ON PIN/IO PAD"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44403"
            ],
            [
              "Description",
              "UNDERFILL ON TOP OF DIE"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44404"
            ],
            [
              "Description",
              "UNDERFILL LOW FILLET"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44406"
            ],
            [
              "Description",
              "UNDERFILL SPILLAGE ON PACKAGE"
            ],
            [
              "RejectQty",
              ""
            ]
          ],
          [
            [
              "Code",
              "E44603"
            ],
            [
              "Description",
              "DAMAGED LEAD/PIN"
            ],
            [
              "RejectQty",
              ""
            ]
          ]
        ]
      ],
      [
        "WipData",
        [
          [
            [
              "Code",
              "LINE_NO"
            ],
            [
              "Value",
              "AOI"
            ]
          ],
          [
            [
              "Code",
              "MACHINE_NO"
            ],
            [
              "Value",
              "AOI-03"
            ]
          ],
          [
            [
              "Code",
              "PROCESSED_BY"
            ],
            [
              "Value",
              "123456"
            ]
          ],
          [
            [
              "Code",
              "ANGSUK"
            ],
            [
              "Value",
              ""
            ]
          ]
        ]
      ],
      [
        "WipDataRequired",
        [
          [
            [
              "LINE_NO",
              "1"
            ]
          ],
          [
            [
              "MACHINE_NO",
              "0"
            ]
          ],
          [
            [
              "PROCESSED_BY",
              "0"
            ]
          ],
          [
            [
              "ANGSUK",
              "0"
            ]
          ]
        ]
      ],
      [
        "RejectInfoToDatalyzer",
        "N"
      ]
    ],
    "Value": 0
  }
  ';
  $dataArray = json_decode($jsondata,true);
  $wipData = null;
  // Extract and format LotInfo
$lotInfo = null;
foreach ($dataArray['List2'] as $item) {
    if ($item[0] === "LotInfo") {
        $lotInfo = $item[1];
        break;
    }
}

// Output formatted LotInfo
if ($lotInfo) {
    echo "LotInfo:<br>";
    foreach ($lotInfo as $entry) {
        echo "<b>{$entry[0]}:</b> {$entry[1]}<br>";
    }
} else {
    echo "LotInfo not found.";
}

// Extract and format RejectInfo
$rejectInfo = null;
foreach ($dataArray['List2'] as $item) {
    if ($item[0] === "RejectInfo") {
        $rejectInfo = $item[1];
        break;
    }
}

// Output formatted RejectInfo
if ($rejectInfo) {
    echo "<br>RejectInfo:<br>";
    foreach ($rejectInfo as $entry) {
        echo "<b>Code:</b> {$entry[0][1]}<br>";
        echo "<b>Description:</b> {$entry[1][1]}<br>";
        echo "<b>RejectQty:</b> {$entry[2][1]}<br><br>";
    }
} else {
    echo "<br>RejectInfo not found.";
}
  foreach ($dataArray['List2'] as $item) {
      if ($item[0] === "WipData") {
          $wipData = $item[1];
          break;
      }
  }
  
  // Output formatted WipData
  if ($wipData) {
      echo "WipData:<br>";
      foreach ($wipData as $entry) {
          echo "<b>{$entry[0][1]}:</b> {$entry[1][1]}<br>";
      }
  } else {
      echo "WipData not found.";
  }
  
  ?>